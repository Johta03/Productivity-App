{%extends 'main/base.html'%}


{%block content%}


<style>
  @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600&display=swap');

  .body.notes {
    font-family: 'Rubik', sans-serif;
  }

  .container-outline {
    border: 1px solid #d6d6d6;
    border-radius: 15px;
    padding: 25px;
    margin-left: auto;
    margin-right: auto;
    background-color: #F3F3F3;
    justify-content: space-between;
  }

  .outline {
    border: 1px solid #d6d6d6;
    border-radius: 15px;
    padding: 13px;
}

  .btn:hover {
    border-color: #2f2bb6;
    /* other styles for hover state */
  }
  .delete-note-link{
    display:block;
    margin-left:1%;
  }
  
</style>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<body class='notes'>
  <h1>Notes</h1>

  <div class="container-outline" style="margin-top: 3%">
    <div style="margin-right: 2%;">
      <div id="buttonContainer1">
      <button type="submit" class="btn btn-lg outline w-100"
        style="background-color: white; color: #898989; font-family: 'Rubik', sans-serif; font-weight: 500; font-size:auto; text-align: center;"
        onclick="replaceWithForm('buttonContainer1', 'formContainer1')">
        <i class="fa-solid fa-plus fa-lg" style="margin-right: 7px;"></i> Add New Page
      </button>
      </div>

      <div id="formContainer1" style="display: none; margin-bottom:2%;">
        <form method="POST" action="{%url 'notes'%}">
          {%csrf_token%}
          
          <input name="task" id="taskInput1" type="text" class="btn-lg outline w-100 fs-6 mt-3"
          style="color: #898989; font-family: 'Rubik', sans-serif; font-weight: 400; text-align: left; margin-bottom:2%;"
          placeholder="Enter Page Title"/>

          <button type="button" class="btn outline" style="padding: 0.8em; width: 15%; background-color: white;" 
          onclick="cancelOut('buttonContainer1', 'formContainer1', 'taskInput1')">
              Cancel
          </button>
          <button name="newItem" value="newItem" type="submit" class="btn btn-primary outline" style="padding: 0.8em; width: 15%; margin-left: 1%;"
          onclick="handleFormSubmit('buttonContainer1', 'formContainer1', 'taskInput1')">
          Add
      </button>
    </div>

      <ul class="nav nav-pills flex-column mt-4">
        {% for note in user_notes %}
        <li class="nav-item py-2 py-sm-0 gap ">
          <div class="d-flex align-items-center outline">
            <a href="/notes/{{ note.id }}" class="nav-link text-black flex-grow-1">
              <span class="ms-2 d-sm-inline" style="font-weight:500">
                {{ note.title|upper }}
              </span>
            </a>
            <a href="{% url 'delete_note' note.id %}" title="Delete" class="delete-note-link">
              <i class="far fa-trash-alt"></i>
            </a>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>


  <script>
    function replaceWithForm(buttonContainerID, formContainerID) {
      var buttonContainer = document.getElementById(buttonContainerID);
      var formContainer = document.getElementById(formContainerID);

      buttonContainer.style.display = 'none';
      formContainer.style.display = 'block';

      // Store form visibility status in local storage
      localStorage.setItem(formContainerID + 'Visible', 'true');
  }

  function cancelOut(buttonContainerID, formContainerID, taskInputID) {
      var buttonContainer = document.getElementById(buttonContainerID);
      var formContainer = document.getElementById(formContainerID);
      var taskInput = document.getElementById(taskInputID);

      buttonContainer.style.display = 'block';
      formContainer.style.display = 'none';

      // Store form visibility status in local storage
      localStorage.setItem(formContainerID + 'Visible', 'false');
  }

  function handleFormSubmit(buttonContainerID, formContainerID, taskInputID) {
    cancelOut(buttonContainerID,formContainerID,taskInputID)
    addTask(formContainerID, taskInputID);
  }
  
  function addTask(formContainerID, buttonContainerID) {
    var form = document.getElementById(formContainerID);
    var taskInput = document.getElementById(taskInputID);

    // Perform any necessary actions before adding the task

    // Submit the form
    form.submit();

  }

  
  
  </script>
  <!-- Main Quill library -->
  <script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
  <script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>

  <!-- Theme included stylesheets -->
  <link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <link href="//cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet">

  <!-- Core build with no theme, formatting, non-essential modules -->
  <link href="//cdn.quilljs.com/1.3.6/quill.core.css" rel="stylesheet">
  <script src="//cdn.quilljs.com/1.3.6/quill.core.js"></script>

</body>

{%endblock%}